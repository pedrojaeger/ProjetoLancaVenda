<div class="row">
  <mat-card>
    <mat-toolbar color="primary">Lançar Venda</mat-toolbar>

    <form [formGroup]="formVenda" #formDir="ngForm">
      <mat-form-field appearance="outline">
        <mat-label>Nome Cliente</mat-label>
        <input matInput formControlName="cliente" placeholder="Nome Cliente" />
      </mat-form-field>


      <mat-form-field appearance="outline">
        <mat-label>Valor da Venda</mat-label>
        <input
          matInput
          formControlName="valor"
          type="number"
          placeholder="Valor da Venda"
        />
      </mat-form-field>

      <mat-form-field appearance="fill">
        <mat-label>Forma de Pagamento</mat-label>
        <mat-select formControlName="formaPagamento">
          <mat-option value="Pix Marcus">Pix Marcus</mat-option>
          <mat-option value="Pix Angela">Pix Angela</mat-option>
          <mat-option value="Rede">Rede</mat-option>
          <mat-option value="Cielo">Cielo</mat-option>
        </mat-select>
      </mat-form-field>

      <button
        *ngIf="!editavel"
        (click)="lancaVenda()"
        mat-raised-button
        color="primary"
      >
        Lançar Venda
      </button>
      <button
        *ngIf="editavel"
        (click)="alterarVenda()"
        type="submit"
        mat-raised-button
        color="primary"
      >
        Alterar Venda
      </button>
    </form>
  </mat-card>
  <br />
</div>

<mat-divider></mat-divider>

<table class="tabela">
  <thead class="tabela__cabecalho">
    <th class="tabela__cabecalho__conteudo">Data</th>
    <th class="tabela__cabecalho__conteudo">Cliente</th>
    <th class="tabela__cabecalho__conteudo">Valor</th>
    <th class="tabela__cabecalho__conteudo">Forma Pagamento</th>
  </thead>

  <tbody>
    <tr
      class="tabela__linha"
      *ngFor="let venda of vendas; let idVendaNoArray = index"
    >
      <td class="tabela__conteudo">{{ venda.data | date: "short" }}</td>
      <td class="tabela__conteudo">{{ venda.cliente }}</td>
      <td class="tabela__conteudo">{{ venda.valor | currency }}</td>
      <td class="tabela__conteudo">{{ venda.formaPagamento }}</td>
      <button
        mat-icon-button
        color="primary"
        (click)="editarVenda(idVendaNoArray, venda)"
      >
        <mat-icon>edit</mat-icon>
      </button>
      <button
        mat-icon-button
        color="warn"
        (click)="excluirVenda(idVendaNoArray)"
      >
        <mat-icon>delete</mat-icon>
      </button>
    </tr>
    <tr class="tabela__linhatotal">
      <td class="tabela__conteudototal">TOTAL</td>
      <td class="tabela__conteudototal">--</td>
      <td class="tabela__conteudototal">{{ valorTotal | currency }}</td>
      <td class="tabela__conteudototal">--</td>
    </tr>
  </tbody>
</table>

